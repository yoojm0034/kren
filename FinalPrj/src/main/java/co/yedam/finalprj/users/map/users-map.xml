<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.yedam.finalprj.users.map.UsersMap">
	<!-- select -->
	<select id="usersSelectList" resultType="co.yedam.finalprj.users.vo.UsersVO">
		select *
		from users
	</select>
	<select id="adminUsersSelectList" resultType="co.yedam.finalprj.users.vo.UsersVO">
		SELECT *
		FROM users
		WHERE status = '일반회원'
		AND report_cnt > 0
		ORDER BY report_cnt DESC
	</select>
	
	<!-- update -->
	<update id="adminUsersUpdate" parameterType="co.yedam.finalprj.users.vo.UsersVO">
		update users
		set status = #{status}
		where user_id = #{user_id}
	</update>

	<!-- 아이디 중복체크 -->	
	<select id="idCheck" parameterType="string" resultType="co.yedam.finalprj.users.vo.UsersVO" >
		select * from users where user_id = #{user_id}
	</select>

	<!-- 이름중복체크 -->
	<select id="nameCheck" parameterType="string" resultType="co.yedam.finalprj.users.vo.UsersVO" >
		select * from users where name = #{name}
	</select>
	
	<!-- 이메일중복체크 -->
	<select id="emailCheck" parameterType="string" resultType="co.yedam.finalprj.users.vo.UsersVO" >
		select * from users where email = #{email}
	</select>
	
	<!-- 로그인 -->
	<select id="usersSelect" resultType="co.yedam.finalprj.users.vo.UsersVO">
		SELECT *
		FROM users
		WHERE USER_ID = #{user_id}
		AND PASSWORD = #{password}
	</select>
	<select id="loginCheck" parameterType="co.yedam.finalprj.users.vo.UsersVO" resultType="int">
		SELECT count(*)
		FROM users
		WHERE USER_ID = #{user_id}
		AND PASSWORD = #{password}
	</select>
	
	<!-- 아이디/비밀번호 찾기 -->
	<select id="findId" resultType="co.yedam.finalprj.users.vo.UsersVO">
		SELECT * 
		FROM users 
		WHERE EMAIL = #{email}
		AND NAME = #{name} 
	</select>
	<select id="findPw" resultType="co.yedam.finalprj.users.vo.UsersVO">
		SELECT * 
		FROM users 
		WHERE EMAIL = #{email}
		AND USER_ID = #{user_id}
	</select>
	

</mapper>